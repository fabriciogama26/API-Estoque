Tela: Login
===========

Visão geral
-----------
- Tela inicial para autenticação do usuário, com suporte a modo remoto (Supabase) e modo local (credenciais em `.env.local`).
- A interface inclui campos de email e senha, botão para recuperação de senha (apenas modo remoto) e mensagens de feedback contextual.【F:src/pages/LoginPage.jsx†L1-L118】

Comportamento
-------------
- Ao submeter, chama `useAuth().login`. Em caso de sucesso redireciona para a rota anterior (`location.state.from`) ou `/`.
- Erros de autenticação são exibidos logo acima do botão principal.
- Botão “Esqueceu a senha?” chama `useAuth().recoverPassword`. No modo local lança erro informando indisponibilidade; no remoto envia e-mail via Supabase Auth (respeitando `VITE_SUPABASE_PASSWORD_REDIRECT`).【F:src/pages/LoginPage.jsx†L120-L190】【F:src/context/AuthContext.jsx†L90-L168】

Credenciais por modo
--------------------
- **Local:** valores definidos por `VITE_LOCAL_USERNAME`, `VITE_LOCAL_PASSWORD`, `VITE_LOCAL_DISPLAY_NAME` (defaults `admin`/`admin123`). A sessão fica no `localStorage` e existe timeout de inatividade de 10 minutos.【F:src/context/AuthContext.jsx†L7-L84】【F:src/context/AuthContext.jsx†L170-L238】
- **Remoto:** exige `VITE_SUPABASE_URL` e `VITE_SUPABASE_ANON_KEY`. O login usa `supabase.auth.signInWithPassword` e a recuperação `resetPasswordForEmail` com redirect opcional.【F:src/context/AuthContext.jsx†L96-L151】【F:src/context/AuthContext.jsx†L153-L200】

Boas práticas
-------------
- Configure SSL/Custom Domain no Supabase antes de habilitar recuperação de senha em produção (link enviado precisa apontar para domínio válido).
- Personalize `logo2.png` em `public/` para refletir a identidade visual da empresa.
- Evite usar usuários com `service_role` no frontend; restrinja ao perfil `anon` com políticas RLS adequadas.


Atualizacao 2025-11
--------------------
- Mencionei que o indicador de filtro derivado dos graficos e limpo automaticamente quando o usuario sai da sessao, evitando reutilizar termos antigos no proximo login.
- Adicionei nota reforçando que o botao de expandir graficos so aparece para usuarios autenticados, seguindo as mesmas verificacoes descritas aqui.
