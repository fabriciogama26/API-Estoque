Tela: Saídas de Materiais
- Conteúdo em src/help/helpContent.json (chave 'saidas'); edite títulos/steps/notes e mídias (/public/help/saidas/*).
- Campos com * sao obrigatorios no formulario.

Visão geral

Registrar, editar, consultar e cancelar saídas de EPI/materiais. Busca de material aceita nome, descrição, ID ou CA; filtros por período, centros (estoque/custo/serviço), status e termo livre. Caminhos suportados: /saidas e /movimentacoes/saidas.

Arquitetura (modular)

- Hook useSaidasController + context para formulário, filtros, tabela, histórico e cancelamento.
- Serviço: saidasService (listar/criar/atualizar/cancelar) com dataMode remoto/local.
- Utils: saidasUtils para formatar/filtrar registros; rules para payloads/validações.
- Erros: useErrorLogger('saidas') registra falhas em app_errors.

Fluxos principais

- Formulário: pessoa, centro de estoque (filtra materiais), material (autocomplete por nome/ID/descrição/CA), quantidade, datas; centros de custo/serviço preenchidos pela pessoa; campo "Em estoque" destacado (sem linha de resumo abaixo); cancelar saída com motivo obrigatório (modal).
- Filtros: período, centros (estoque/serviço), status dinâmico resolvido por id do catálogo status_saida (aceita nome se id não vier), termo livre (nome/matrícula de pessoa ou nome/descrição/ID/CA de material); "Aplicar" consulta na API; limpar restaura defaults e recarrega a lista.
- Tabela: colunas Pessoa, Material, Quantidade, Data entrega, Status, Registrado por, Cadastrado em; ações Ver (detalhes), Editar, Histórico, Cancelar.
- Detalhes: modal em cartões (padrão acidentes) mostrando todos os campos e centros.
- Histórico: modal no padrão “Histórico do acidente”, exibindo alterações campo a campo.

Atalhos (vindo do Estoque atual)
-------------------------------
- A tela de Saídas pode ser aberta com parâmetros na URL para pré-preencher o formulário:
  - `?centroEstoque=<nome-ou-id>` (obrigatório para habilitar o campo de material)
  - `?materialId=<id-do-material>`
- A tela primeiro seleciona o Centro de estoque e, em seguida, seleciona o Material automaticamente quando possível.

Boas práticas

- Evitar recarga quando filtros não mudam; loaders locais.
- Exibir ação "Cancelar saída" com cor de atenção e exigir motivo.

Atualização 2025-12

- Tela modularizada com hooks/services/utils; detalhes e histórico padronizados; status dinâmico; logging ativo; autocomplete de material aceita CA; campo "Em estoque" destacado e sem linha extra de saldo/min/valor.
- Filtro de Status envia UUID quando disponível e o backend resolve nome/UUID; evita erro "invalid input syntax for type uuid" quando a coluna status guarda IDs.

===========================================
Mapa de Código (funções, hooks e constantes)
===========================================

Funções principais
------------------
- SaidasPage — componente de página (src/pages/SaidasPage.jsx); orquestra formulário, filtros, tabela, detalhes, histórico e cancelamento via controller/contexto.
- useSaidasController — hook/controller (src/hooks/useSaidasController.js); estado do form, filtros, tabela, paginação, submit/editar/cancelar.
- SaidasContext — contexto (src/context/SaidasContext.jsx); compartilha estado/handlers do controller.
- Componentes de UI — (src/components/Saidas/*) filtros, formulário, tabela, histórico e modal de cancelamento.

Constantes e configurações
--------------------------
- Defaults de formulário/filtro/histórico — src/config/SaidasConfig.js (ou constantes no controller); estados iniciais do form, filtros e modais.

Funções utilitárias relacionadas
--------------------------------
- filterSaidas, payloads, formatadores — src/utils/saidasUtils.js e src/rules/SaidasRules.js; filtrar lista, formatar valores/datas, montar payloads de salvar/editar/cancelar.

Serviços e integrações externas
-------------------------------
- saidasService — serviço de API (src/services/saidasService.js); listar/criar/atualizar/cancelar saídas (Supabase ou dataClient local).

Ajuda contextual
----------------
- Botão 'Ajuda' no cabeçalho abre modal com passos/notas desta página.
- Conteúdo em src/help/helpContent.json (chave 'saidas'); edite títulos/steps/notes e mídias (/public/help/saidas/*).
