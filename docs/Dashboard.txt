Tela: Dashboards de Estoque
===========================

Visão geral
-----------
- Resumo consolidado das movimentações de estoque (entradas x saídas), valores financeiros e materiais em alerta.
- Componentes reutilizam os mesmos dados tanto no modo Supabase quanto no modo local, já que todo o cálculo é feito no cliente.
- Filtros controlam apenas a faixa de períodos consultada no `dataClient`; a busca textual (`termo`) atua em memória.

Fluxo principal
---------------
1. Ao montar a página, `DashboardPage` define filtros padrão para o ano corrente e chama `dataClient.estoque.dashboard(params)`.
2. O client remoto (`src/services/api.js`) consulta Supabase (`materiais`, `entradas`, `saidas`, `pessoas`) e delega a agregação para `montarDashboard` (`src/lib/estoque.js`).
3. O client local (`src/services/localApi.js`) utiliza os mesmos helpers com os dados do `localStorage`.
4. O resultado alimenta os cards de destaque, os gráficos e as tabelas derivadas.

Filtros
-------
- `periodoInicio` / `periodoFim`: inputs `type="month"` que limitam a consulta ao `dataClient`.
- `termo`: texto livre aplicado sobre nome e fabricante dos materiais já carregados.
- Botões de "Filtrar" e "Limpar" disparam o recálculo e reposicionam os filtros para os valores padrão.

Cards principais
----------------
- **Movimentações:** quantidade total de entradas + saídas, com breakdown na legenda.
- **Valor movimentado:** soma de `quantidade * valorUnitario` para as movimentações do período.
- **Materiais no estoque:** total de itens (quantidade) e número de materiais distintos.
- **Alertas:** quantidade de materiais abaixo do estoque mínimo atual.

Gráficos e tabelas
------------------
- `EntradasSaidasChart`: série temporal mensal construída por `agruparPorPeriodo` (em `DashboardPage.jsx`).
- `ValorMovimentadoChart`: aproveita os mesmos dados da série temporal para representar valores financeiros.
- `EstoquePorMaterialChart`: top materiais com maior quantidade disponível.
- `EstoquePorCategoriaChart`: distribuição por categorias (primeira palavra do nome do material por padrão).
- `MateriaisMaisUsadosChart`: ranking de materiais mais movimentados (entradas + saídas).

Estados e mensagens
-------------------
- `isLoading`: desabilita o formulário de filtros e exibe o estado de carregamento nos cards e gráficos.
- `error`: mensagem de erro global abaixo do cabeçalho quando o `dataClient` falha.
- Cada componente de gráfico mostra fallback "Nenhum dado disponível" quando recebe arrays vazios.

Componentes relacionados
------------------------
- `src/pages/DashboardPage.jsx`
- `src/components/charts/EntradasSaidasChart.jsx`
- `src/components/charts/EstoqueCharts.jsx`
- `src/components/charts/EstoqueCategoriaChart.jsx`
- `src/styles/DashboardPage.css` e `src/styles/charts.css`

Dependências
------------
- `src/services/api.js` e `src/services/localApi.js` para consulta de dados.
- `src/lib/estoque.js` para agregações de estoque e cálculo de alertas.
- `AuthContext` não interfere diretamente na tela, mas o usuário logado aparece na barra lateral (`SystemStatus`).
