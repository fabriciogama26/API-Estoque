Tela: Dashboards de Estoque
===========================

Visão geral
-----------
- Consolida indicadores de movimentação de estoque (entradas, saídas, valor total e reposição) no período filtrado.
- Agrupa dados por período (mês/ano) e apresenta gráficos de barras/linhas para evolução, ranking de materiais e distribuição por categoria.
- Fonte de dados é `api.estoque.dashboard`, que retorna blocos específicos para cada widget.【F:src/pages/DashboardPage.jsx†L63-L107】

Filtros disponíveis
-------------------
- **Período inicial/final (AAAA-MM):** aplica recorte mensal inclusive nas consultas de entradas/saídas.
- **Termo livre:** busca por nome/fabricante, reutilizado em todos os cards para limitar os materiais exibidos.
- Botão *Aplicar filtros* dispara nova chamada; *Limpar filtros* restaura o ano corrente completo.【F:src/pages/DashboardPage.jsx†L34-L61】【F:src/pages/DashboardPage.jsx†L109-L139】

Indicadores principais
----------------------
- **Cards de resumo:** total de entradas (quantidade + valor), total de saídas e saldo do estoque atual. Valores formatados com `Intl.NumberFormat` para BRL.【F:src/pages/DashboardPage.jsx†L18-L33】【F:src/pages/DashboardPage.jsx†L141-L178】
- **Série histórica (EntradasSaidasChart):** soma de quantidades e valores mês a mês a partir de `entradasDetalhadas`/`saidasDetalhadas`. A agregação é feita pela função `agruparPorPeriodo` antes de renderizar o gráfico de barras combinadas.【F:src/pages/DashboardPage.jsx†L41-L76】【F:src/pages/DashboardPage.jsx†L180-L190】
- **Estoque por material:** lista top-N ordenada por quantidade disponível, exibida em gráfico horizontal (`EstoquePorMaterialChart`).【F:src/pages/DashboardPage.jsx†L192-L197】
- **Categorias:** monta mapa por primeira palavra do nome (fallback “Não classificado”) para agrupar famílias de EPIs.【F:src/pages/DashboardPage.jsx†L198-L205】
- **Materiais mais movimentados:** ranking das saídas acumuladas (quantidade) no período analisado.【F:src/pages/DashboardPage.jsx†L206-L213】

Estados e tratamento de erros
-----------------------------
- `isLoading` exibe mensagem na área principal enquanto aguarda os dados; erros exibem `feedback--error` com a mensagem retornada pela API.【F:src/pages/DashboardPage.jsx†L113-L122】【F:src/pages/DashboardPage.jsx†L232-L251】
- Em caso de retorno vazio, cada gráfico mostra feedback neutro (“sem dados”) implementado nos componentes de chart.

Boas práticas para dados
------------------------
- Garanta que a API retorne `valorUnitario` para entradas/saídas; sem isso o cálculo `quantidade * valorUnitario` ficará zerado.
- Para novos indicadores, estenda `api.estoque.dashboard` mantendo a estrutura atual (`entradas`, `saidas`, `estoqueAtual`, `materiaisMaisMovimentados`, etc.) para evitar ajustes na página.
- Use seeds de `src/data/local-seed.json` como referência de formatos quando desenvolver no modo local.
