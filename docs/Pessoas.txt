Tela: Cadastro de Pessoas

Visao geral

Cadastro/edicao de colaboradores (funcionarios, terceiros, estagiarios) com vinculo a centro de servico, centro de custo, setor, cargo e tipo de execucao. Filtros e historico de alteracoes.

Arquitetura (modular)

- Hooks: usePessoasController (formulario/filtros/tabela), usePessoas (lista), usePessoasFiltro, useErrorLogger('pessoas').
- Servicos: pessoasService (listar, historico, resumo), integra dataMode remoto/local.
- Utils: pessoasUtils (formatacao de datas, uniqueSorted, resolveUsuarioNome).
- Erros: log em app_errors via useErrorLogger.

Campos e fluxos

- Campos principais: matricula, nome, centro_servico_id/centro_custo_id, setor_id, cargo_id, tipo_execucao_id, dataAdmissao, ativo.
- Historico: timeline com alteracoes (usuario, data, campos modificados).
- Filtros: termo livre, centro de servico, setor, cargo, ativo; limpar restaura defaults.
- Tabela: paginacao local; coluna “Registrado por” usa usuarioCadastroUsername (view pessoas_view atualizada).

Boas praticas

- Usar matricula como chave; manter catalogos de centro/sector/cargo atualizados.
- Conferir pessoas_view apos migrations para garantir aliases legados (centro_servico, centro_custo, tipo_execucao) usados nas telas.

Atualizacao 2025-12

- Tela modularizada com hooks/services/utils; view pessoas_view inclui usuarioCadastroUsername e aliases legados para compatibilidade.
