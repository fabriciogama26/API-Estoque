Tela: Dashboard de Acidentes

Visao geral

Monitora indicadores SST: total de acidentes, dias perdidos, TF/TG, IA/IAG/IRA, distribuicao por agente/tipo/parte/cargo e tendencias mensais. Usa dados da tela de Acidentes.

Arquitetura (modular)

- Hook useDashboardAcidentes: carrega indicadores, prepara series e rankings; cacheia filtros para evitar recarga duplicada e flicker.
- Context (DashboardAcidentesProvider) compartilha filtros, estado de loading e dados para os cards/graficos.
- Servicos: dashboardAcidentesApi (Supabase) ou modo local via dataClient.
- Utils: dashboardAcidentesUtils para formatar valores, legendas e referencias OIT.
- Erros: useErrorLogger('dashboard-acidentes') registra falhas de carga/filtro em app_errors.

Filtros e fluxos

- Filtros: periodo inicial/final, centro de servico, tipo, lesao, parte lesionada, agente, cargo. Aplicar sem piscas; limpar restaura defaults.
- Cards: IA/IAG/IRA, TF/TG, pendencias de EPI, zero acidentes, outros indicadores com expand/legendas.
- Graficos: distribuicao por tipo/agente/parte/cargo e tendencia mensal; cliques podem refletir filtros em graficos relacionados (quando habilitado).

Boas praticas

- Reutilizar a chave de filtro cacheada; evitar re-renderes que troquem ordem de hooks.
- Manter loaders dentro dos cards/graficos em vez de bloquear o header de filtros.

Atualizacao 2025-12

- Dashboard modularizado com hook/context, sem flicker no botao de filtro; logs de erro no Supabase; compatibilidade com modo local/remoto.
