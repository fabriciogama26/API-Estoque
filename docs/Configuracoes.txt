Tela: Configuracoes
===================

Visao geral
-----------
- Pagina React: src/pages/Configuracoes.jsx.
- Secoes exibidas: gerenciamento de credencial/paginas/status dos usuarios e reset de senha (admin).
- Em modo local, a UI mostra apenas avisos (sem Supabase).

Componentes e funcoes
---------------------
- ConfiguracoesPage: monta header + PermissionsSection + AdminResetPasswordSection.
- PermissionsSection:
  - Carrega usuarios de app_users (exceto master), com fallback para o usuario atual se Supabase estiver indisponivel.
  - Permite alterar credential, page_permissions e status (ativo/inativo).
  - Salva em app_users e registra historico em app_users_credential_history (action update).
  - Chama RPC sync_user_ban_with_status para alinhar auth.users.banned_until (bloqueio de login) ao status ativo/inativo.
  - Modal CredentialsHistoryModal lista historico de credencial/paginas/status por usuario (acao update/password_reset).
- AdminResetPasswordSection:
  - Lista usuarios (exceto master) e envia reset de senha via supabase.auth.resetPasswordForEmail.
  - Registra historico (action password_reset).
- syncAuthUserBan(userId, isActive): helper no front que executa RPC sync_user_ban_with_status (Supabase) para manter banimento do Auth sincronizado com app_users. Falhas sao apenas logadas para nao travar a tela.

Fluxos principais
-----------------
- Edicao de permissoes:
  - Seleciona usuario -> escolhe credencial -> alterna paginas -> alterna status (Ativo/Inativo) -> Salvar credencial.
  - Em caso de erro, feedback tipo error; sucesso mostra success.
- Historico:
  - Botao de relogio abre modal; lista acoes (update/password_reset) com antes/depois de credencial, paginas e status.
- Reset de senha (admin):
  - Seleciona usuario com email -> Enviar reset de senha.
  - Registra historico de password_reset.

Integracao com Supabase
-----------------------
- Leitura/escrita: tabelas app_users e app_users_credential_history.
- RPC exigida: sync_user_ban_with_status(p_user_id uuid, p_active boolean) com SECURITY DEFINER e grants para anon/authenticated. Atualiza auth.users.banned_until para bloquear ou liberar login conforme ativo/inativo.
- Em modo local ou sem Supabase, a tela usa apenas o usuario atual como fallback e nao grava nada remoto.

Notas de UX
-----------
- Master fica oculto da lista (nao editavel/resetavel).
- Status toggles usam texto Ativo/Inativo e feedback textual.
- Ajuda contextual: HelpButton top-right, conteudo na chave "configuracoes" de src/help/helpContent.json; assets em public/help/configuracoes/.

