Tela: Estoque (resumo e alertas)

Visao geral

Visualiza saldo total, valor para reposicao, alertas de minimo e distribuicoes por categoria/fabricante/centro. Permite filtrar e paginar alertas.

Escopo da tela

Uso por almoxarifado e gestao para monitorar rupturas e valores. Integra com Entradas/Saidas e com Dashboard de Estoque.

Arquitetura (modular)

- Hook useEstoqueFiltro: controla filtros, evita reload quando params nao mudam, entrega alertas filtrados.
- Context EstoqueContext: centraliza estado de estoque, filtros, tamanhos de pagina e reload.
- Hook useDashboardEstoque: prepara cards e graficos; cacheia chave de busca para evitar flicker.
- Servicos: estoqueApi/entradasService/saidasService e materiaisService abastecem cards e alertas.
- Utils: dashboardEstoqueUtils/estoqueUtils formatam cards, graficos e legendas.
- Erros: useErrorLogger('estoque') registra falhas de carga/filtros em app_errors.

Fluxos principais

- Cards superiores: Estoque total atual e Valor para reposicao (ambos com icone info), alertas paginados com botoes estaticos.
- Filtros: centro de servico, categoria, fabricante, termo livre; aplicar/limpar sem piscas de botao.
- Alertas: cards listam saldo atual/minimo e detalhes do material; paginacao local (pageSize configuravel no contexto).

Boas praticas

- Evitar refazer load se filtros nao mudaram; manter botoes sem flicker e carregar skeletons dentro dos blocos.
- Garantir que alertas usem a mesma chave de filtro usada nos cards para consistencia visual.

Atualizacao 2025-12

- Tela modularizada com contexto e hooks; info icons restaurados; botoes de filtro estaveis e carregamento dentro dos blocos.
