Tela: Estoque Atual
===================

Visão geral
-----------
- Consolida o saldo por material, apresenta alertas de estoque mínimo e permite ajuste desse parâmetro por item.
- O carregamento principal utiliza `api.estoque.current({ periodoInicio, periodoFim })`, que retorna `itens` e `alertas`.
- Valores monetários são formatados em BRL e quantidades usam `Intl.NumberFormat` para consistência.【F:src/pages/EstoquePage.jsx†L15-L117】

Filtros
-------
- **Período (mês inicial/final):** converte para `Date` UTC para filtrar itens pela última atualização (`ultimaAtualizacao`).
- **Termo de busca:** busca em nome, fabricante e centros de custo.
- **Centro de custo:** select preenchido com valores únicos derivados dos itens carregados.
- Botões *Aplicar filtros* (submete o formulário) e *Limpar filtros* (restaura defaults e recarrega).【F:src/pages/EstoquePage.jsx†L119-L200】

Alertas
-------
- Lista resumida na primeira seção com badge, quantidade atual, mínimo, déficit e valor estimado de reposição.
- Apenas itens filtrados entram nos alertas; se não houver, mensagem neutra informa ausência de pendências.【F:src/pages/EstoquePage.jsx†L202-L266】

Resumo geral
------------
- Total em estoque (valor), total de itens, valor necessário para reposição (soma do déficit) e data da última movimentação.
- As métricas consideram apenas itens filtrados e são recalculadas em `useMemo` para eficiência.【F:src/pages/EstoquePage.jsx†L268-L318】

Lista de itens
--------------
- Cada cartão exibe fabricante, quantidade, valor unitário/total, validade (dias), CA, centros de custo e última atualização formatada.
- Campo **Estoque mínimo** permite edição inline; ao salvar dispara `api.materiais.update` com `estoqueMinimo` e `usuarioResponsavel`, recarregando os dados na sequência.
- Mensagens de erro por item informam entradas inválidas; botões ficam desativados enquanto a requisição está em andamento.【F:src/pages/EstoquePage.jsx†L320-L407】

Boas práticas
-------------
- Configure políticas no Supabase para permitir que usuários autenticados atualizem `estoque_minimo` na tabela `materiais`.
- Utilize os filtros de período para auditar movimentações específicas antes de gerar relatórios externos.
- No modo local, mantenha `localApi.estoque.current` sincronizado com a estrutura esperada (`alertas` + `itens`) para evitar que cartões fiquem vazios.
