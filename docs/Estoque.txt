Tela: Estoque Atual
===================

Objetivo
--------
- Exibir saldo por material, alertas de estoque minimo e permitir ajustes inline.
- Funciona com dados do Supabase ou com o cache local, sem mudar a interface.

Filtros
-------
- `ano` / `mes`: enviados para `dataClient.estoque.current` para recalcular saldos do periodo.
- `termo`: filtragem no cliente (nome ou fabricante).

Editor inline
-------------
- Campo `estoqueMinimo` editavel por linha.
- Valida numerico >= 0 antes de enviar.
- `Salvar` chama `dataClient.materiais.update`.
  - No modo remoto dispara `PUT /api/materiais/:id`.
  - No modo local atualiza o snapshot e registra historico de preco se necessario.

APIs
----
- `dataClient.estoque.current(params)` -> `{ itens, alertas }`.
- `dataClient.materiais.update(id, payload)` atualiza estoque minimo e auditoria.

Regras e calculos
-----------------
- Ambos os modos usam `montarEstoqueAtual` para garantir consistencia.
- Alertas sao gerados por `estoqueRules.verificarEstoqueMinimo`.
- Ajustes invalidam caches locais (a pagina recarrega dados apos salvar).

Comportamento de UI
-------------------
- `isLoading` e `isSaving` controlam botoes e mensagens (`Filtrando...`, `Salvando...`).
- Alertas exibem deficit (diferen√ßa entre saldo e minimo).
- Erros especificos aparecem proximo ao componente acionado.

Dependencias
------------
- `AuthContext` para capturar `usuarioResponsavel`.
- `dataClient` para alternar entre remoto/local.
- Seeds locais oferecem dados iniciais; no modo remoto depende das tabelas Supabase `materiais`, `entradas`, `saidas`.
